!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).service=t()}(this,(function(){"use strict";const e=async(e,t,r=null)=>{let a;if(a=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):null}),!a.ok){let e=await a.json();throw new Error(JSON.stringify(e))}const n=await a.json();return console.log("Dados recebidos:",n),n};var t=async(t,r=null)=>{try{return await e(t,"GET")}catch(e){throw e}},r=async(t,r)=>{try{return await e(t,"POST",r)}catch(e){throw e}},a=async(t,r)=>{try{return await e(t,"PUT",r)}catch(e){throw e}},n=async t=>{try{return await e(t,"DELETE")}catch(e){throw e}};var o={generateURL:function(){return"http://localhost:2337"}},s={async get(e,r){if(""===e)throw new Error("Parâmetro de rota para o serviço não definido. Por favor, chame restService antes.");let a;return e=i.get(e),a=r?await t(o.generateURL()+e):await t(o.generateURL()+e,r),console.log(a),a},async create(e,t){if(""===this.rota)throw new Error("Parâmetro de rota para o serviço não definido. Por favor, chame restService antes.");e=i.get(e);return await r(o.generateURL()+e,t)},async remove(e,t){e=i.get(e);return await n(o.generateURL()+e+"/"+t)},async update(e,t,r){e=i.get(e);return await a(o.generateURL()+e+"/"+t,r)}};const i=new Map;return i.set("animal","/api/animals"),i.set("condutor","api/condutor"),{getAnimal:async e=>s.get("animal",e),createAnimal:async e=>s.create("animal",e),removeAnimal:async e=>s.remove("animal",e),getCondutor:async e=>s.get("condutor",e),createCondutor:async e=>s.create("condutor",e),extrairMensagensDeErro(e,t=""){let r=[];for(const a in e)if("path"===a&&e[a]&&e.message)r.push(`${e.message}`);else if("object"==typeof e[a]&&null!==e[a]){const n=t.length?`${t}.${a}`:a;r=r.concat(this.extrairMensagensDeErro(e[a],n))}return r},juntarMensagensDeErro(e){let t="";for(let r=0;r<e.length;r++)t+=e[r],r!==e.length-1&&(t+="\n");return t},getErrorApi(e){let t=this.extrairMensagensDeErro(e);return console.log(JSON.stringify(t)),t=this.juntarMensagensDeErro(t),t},setUIError(e){errorWidget.setText("");let t=this.getErrorApi(e);errorWidget.setText(t)},async getUrl(){return this.getServidor(),"http://localhost:2337"},async getUrlApi(){return"LEDS"==this.getServidor()?"http://host.docker.internal:2337":"http://10.243.144.200:2337"},async getUrlAppSmith(){return"LEDS"==this.getServidor()?"http://localhost:2337":"http://201.62.46.82"},async getHostDocker(){return this.getServidor(),"http://host.docker.internal:2337"},getServidor(){var e=localStorage.getItem("SERVIDOR");return null!=e?"LEDS"==e?"LEDS":"PM":(localStorage.setItem("SERVIDOR","LEDS"),"LEDS")},setServidorLEDS(){localStorage.setItem("SERVIDOR","LEDS")},setServidorPM(){localStorage.setItem("SERVIDOR","PM")}}}));
